<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="javascript" href="javascript.js">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
        const choices = ['Rock', 'Paper', 'Scissors'];
        //let playerChoice = prompt("Choose Your Weapon. Type Either 'Rock', 'Paper', or 'Scissor':");

        //computer will randomly choose an index from the choices array
        let computerPlay = () => choices[Math.floor(Math.random() * 3)];

        //Plays a single round of rock paper scissors between the user and computer.
        function playRound(playerSelection, computerSelection) {
            let gameState = true;

            while (gameState) {
                if (playerSelection.toLowerCase() == 'rock' && computerSelection == 'Scissors'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Rock') {
                    gameState = false;
                    return 1; //PLAYER WINS: will be used to decide who to give points to in the game() function

                } else if (playerSelection.toLowerCase() == 'rock' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Rock'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Scissors') {
                    gameState = false;
                    return 2; //COMPUTER WINS: will be used to decide who to give points to in the game() function

                } else {
                    return 0; //TIE: will be used to decide who to give points to in the game() function


                }
            }
        }



        //USE MORE ARRAYS!!!
        //Starts a game that ends after 5 rounds.
        function game() {
            let turnWinner;
            let playerChoice;

            let playerScore = 0;
            let computerScore = 0;
            let rounds = 1;

            

            for (let i = 0; i < 10 ; i++) {//max rounds 9 rounds can be played, but game wants to end after 5 points
                playerChoice = prompt("Choose Your Weapon. Type Either 'Rock', 'Paper', or 'Scissor':");
                turnWinner = playRound(playerChoice, computerPlay()); //result of a single round played. decides who w
                console.log("++++++++++++++++++++++++++++++");


                if (playerScore == 5) {
                    console.log(`You Win! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`);
                    break;

                }else if (computerScore == 5){
                    console.log(`You Lose! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`);
                    break;

                }
                else if(addPoints(turnWinner) == 0){ //nobody wins a point, round must be replayed
                    console.log("Tie! Rerun the round");
                    console.log(prompt("Tie! Rerun the round"));
                    console.log("Comp points: " + computerScore);
                    console.log("Player points: " + playerScore);

                } else if (addPoints(turnWinner) == 2) { //comp wins a point
                    rounds += 1;
                    computerScore += 1;
                    console.log('computer won');
                    console.log("Comp points: " + computerScore);
                    console.log("Player points: " + playerScore);

                    
                } else { //player wins a point
                    rounds += 1;
                    playerScore += 1;
                    console.log('player won');
                    console.log("Comp points: " + computerScore);
                    console.log("Player points: " + playerScore);

                }
 
            }

        }

        console.log(game());



        //Captializes the first letter of a string value and returns it
        function upperCaseFirst(string) {
            return string.replace(string[0], string[0].toUpperCase());
        }

        //returns who earns a point depending on who wins the round
        function addPoints(value) { //takes the current round's playRound() value
            if (value == 1) {//player gain 1 point
                return 1;
                
            } else if (value == 2) {//computer gain 1 point
                return 2;
                
            } else {//nobody gains a point
                return 0;
                
            }
        }

    </script>

</body>

</html>