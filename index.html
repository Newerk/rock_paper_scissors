<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="javascript" href="javascript.js">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <script>
        const choices = ['Rock', 'Paper', 'Scissors'];
        let computerPlay = () => choices[Math.floor(Math.random() * 3)];

        const rockBtn = document.querySelector('#rock');
        const paperBtn = document.querySelector('#paper');
        const scissorsBtn = document.querySelector('#scissors');


        function playRound(playerSelection, computerSelection) {
            let gameState = true;

            while (gameState) {
                if (playerSelection.toLowerCase() == 'rock' && computerSelection == 'Scissors'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Rock') {
                    gameState = false;
                    return 1; //PLAYER WINS: will be used to decide who to give points to in the game() function

                } else if (playerSelection.toLowerCase() == 'rock' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Rock'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Scissors') {
                    gameState = false;
                    return 2; //COMPUTER WINS: will be used to decide who to give points to in the game() function

                } else {
                    return 0; //TIE: will be used to decide who to give points to in the game() function

                }
            }
        }

        //Starts a game of RPS. Parameter takes a num that will determine how many points it will take to win a game
        function game(points) {
            let turnWinner;
            let playerChoice;
            let scoreBoard; 
            let playerScore = 0, computerScore = 0;


            for (let i = 0; i < Number.MAX_VALUE; i++) {//play until game ends when the computer or player wins enough points
                playerChoice = prompt("Choose Your Weapon. Type Either 'Rock', 'Paper', or 'Scissor':");
                turnWinner = playRound(playerChoice, computerPlay()); //result of a single round played. declares who won
                scoreBoard = `Computer points: ${computerScore}\nPlayer points: ${playerScore}`;

                    if (playerScore === points) {
                        console.log(`You Win! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`);
                        break;

                    } else if (computerScore === points) {
                        console.log(`You Lose! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`);
                        break;

                    }
                    else if (addPoints(turnWinner) === 0) { //nobody wins a point, round must be replayed
                        console.log(prompt("Tie! Try again."));
                        console.log("Tie match");
                        console.log(scoreBoard);

                    } else if (addPoints(turnWinner) === 2) { //comp wins a point
                        computerScore++;
                        console.log('Computer won');
                        console.log(scoreBoard);


                    } else { //player wins a point
                        playerScore++;
                        console.log('Player won');
                        console.log(scoreBoard);

                    }
                }

            }

        console.log(game(5));



        //Captializes the first letter of a string value and returns it
        function upperCaseFirst(string) {
            return string.replace(string[0], string[0].toUpperCase());
        }

        //returns who earns a point depending on who wins the round
        function addPoints(value) { //takes the current round's playRound() value
            if (value == 1) {//player gain 1 point
                return 1;

            } else if (value == 2) {//computer gain 1 point
                return 2;

            } else {//nobody gains a point
                return 0;

            }
        }
    </script>

</body>

</html>