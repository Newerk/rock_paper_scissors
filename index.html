<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="javascript" href="javascript.js">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
        const choices = ['Rock', 'Paper', 'Scissors'];
        let computerPlay = () => choices[Math.floor(Math.random() * 3)];

        const buttons = document.createElement('div');
        buttons.className = 'buttons';

        const rockBtn = document.createElement('button');
        rockBtn.id = 'rock';
        rockBtn.setAttribute("onclick", "buttonClicked('rock')");
        let rockBtnText = document.createTextNode('Rock');
        rockBtn.appendChild(rockBtnText);

        const paperBtn = document.createElement('button');
        paperBtn.id = 'paper';
        paperBtn.setAttribute("onclick", "buttonClicked('paper')");
        let paperBtnText = document.createTextNode('Paper');
        paperBtn.appendChild(paperBtnText);

        const scissorsBtn = document.createElement('button');
        scissorsBtn.id = 'scissors';
        scissorsBtn.setAttribute("onclick", "buttonClicked('scissors')");
        let scissorsBtnText = document.createTextNode('Scissors');
        scissorsBtn.appendChild(scissorsBtnText);


        buttons.append(rockBtn);
        buttons.append(paperBtn);
        buttons.append(scissorsBtn);
        document.body.appendChild(buttons);


        const playerScore = document.createElement('div');
        playerScore.id = 'playerScore';
        let playerScoreText = document.createTextNode('You: ');
        playerScore.appendChild(playerScoreText);
        document.body.appendChild(playerScore);

        const compScore = document.createElement('div');
        compScore.id = 'compScore';
        let compScoreText = document.createTextNode('Computer: ');
        compScore.appendChild(compScoreText);
        document.body.appendChild(compScore);


        const scoreContainer = document.createElement('div');
        scoreContainer.className = 'container';

        const announcer = document.createElement('p');

        // this text content should update as the state of the game progresses("Computer Won","Player Won","Tie! Try Again",
        // "You Win! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}", "You Lose! Final Scores \nYou: ${playerScore}\n
        // Computer: ${computerScore}")
        announcer.textContent = 'Click Start Game to Begin';
        document.body.appendChild(announcer);


        const gameStartBtn = document.createElement('button');
        gameStartBtn.id = 'game-start';
        let gameStartBtnText = document.createTextNode('Start Game');
        gameStartBtn.appendChild(gameStartBtnText);
        buttons.append(gameStartBtn);
        gameStartBtn.addEventListener('click', startGame => {
            game();
        });



        //listens for which button was clicked and returns the appropiate value
        function buttonClicked(button) {
            if (button == "rock") {
                return rockBtn.id;

            } else if (button == "paper") {
                return paperBtn.id;

            } else if (button == "scissors") {
                return scissorsBtn.id;

            } else {
                return;
            }
        };



        function playRound(playerSelection, computerSelection) {
            let gameState = true;

            while (gameState) {
                if (playerSelection == 'rock' && computerSelection == 'Scissors'
                    || playerSelection == 'scissors' && computerSelection == 'Paper'
                    || playerSelection == 'paper' && computerSelection == 'Rock') {
                    gameState = false;
                    return 1; //1 = PLAYER WINS: will be used to decide who to give points to in the game() function 

                } else if (playerSelection == 'rock' && computerSelection == 'Paper'
                    || playerSelection == 'scissors' && computerSelection == 'Rock'
                    || playerSelection == 'paper' && computerSelection == 'Scissors') {
                    gameState = false;
                    return 1; //2 = COMPUTER WINS: will be used to decide who to give points to in the game() function 

                } else {
                    return 0; //0 = TIE: will be used to decide who to give points to in the game() function 

                }
            }
        }

        //Starts a game of RPS. 5 points to win a game
        function game() {
            let turnWinner;
            let playerChoice;
            let scoreBoard;
            let playerScore = 0, computerScore = 0;
            announcer.textContent = 'Choose a hand to play';

            for (let i = 0; i < Number.MAX_VALUE; i++) {//play until game ends when the computer or player wins enough points. for some reason 
                turnWinner = playRound(buttonClicked(), computerPlay()); //result of a single round played. declares who won
                console.log(playerChoice);
                scoreBoard = `Computer points: ${computerScore}\nPlayer points: ${playerScore}`;


                if (playerScore === 5) {//game ends when 5 points reached
                    announcer.textContent = `You Win! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`;
                    break;

                } else if (computerScore === 5) {//game ends when 5 points reached
                    announcer.textContent = `You Lose! Final Scores \nYou: ${playerScore}\nComputer: ${computerScore}`;
                    break;

                }
                else if (addPoints(turnWinner) === 0) { //nobody wins a point, round must be replayed
                    announcer.textContent = "Tie! Try again.";

                } else if (addPoints(turnWinner) === 2) { //comp wins a point
                    computerScore++;
                    announcer.textContent = 'Computer won';
                    compScoreText += computerScore;

                } else { //player wins a point
                    playerScore++;
                    announcer.textContent = 'Player won';
                    playerScoreText += playerScore;

                }
            }

        }

        // console.log(game(5));


        //returns who earns a point depending on who wins the round
        function addPoints(value) { //takes the current round's playRound() value
            if (value == 1) {//player gain 1 point
                return 1;

            } else if (value == 2) {//computer gain 1 point
                return 2;

            } else {//nobody gains a point
                return 0;

            }
        }
    </script>

</body>

</html>