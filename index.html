<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="javascript" href="javascript.js">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>
        const choices = ['Rock', 'Paper', 'Scissors'];
        //let playerChoice = prompt("Choose Your Weapon. Type Either 'Rock', 'Paper', or 'Scissor':");

        //computer will randomly choose an index from the choices array
        let computerPlay = () => choices[Math.floor(Math.random() * 3)];
        //console.log(computerPlay());

        //Plays a single round of rock paper scissors between the user and computer.
        let playRound = (playerSelection, computerSelection) => {
            


            let gameState = true;

            while (gameState) {
                if (playerSelection.toLowerCase() == 'rock' && computerSelection == 'Scissors'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Rock') {
                    gameState = false;
                    //console.log(`Round won! ${upperCaseFirst(playerSelection.toLowerCase())} beats ${upperCaseFirst(computerSelection)}!`);
                    return 1; //PLAYER WINS: will be used to decide who to give points to in the game() function
                    
                    } else if(playerSelection.toLowerCase() == 'rock' && computerSelection == 'Paper'
                    || playerSelection.toLowerCase() == 'scissors' && computerSelection == 'Rock'
                    || playerSelection.toLowerCase() == 'paper' && computerSelection == 'Scissors'){
                    gameState = false;
                    //console.log(`Round lost, ${upperCaseFirst(playerSelection.toLowerCase())} loses to ${upperCaseFirst(computerSelection)}.`);
                    return 2; //COMPUTER WINS: will be used to decide who to give points to in the game() function

                } else {
                    //console.log("It's a tie! Choose again to settle the the score.");
                    return 0; //TIE: will be used to decide who to give points to in the game() function


                } 
            }
        };
        //onsole.log(playRound('RoCK', computerPlay()));

        
        //Starts a game that last for 5 rounds. Game works as intended for now, but instead of 5 rounds, now make the game end after someone gets 5 points
        let game = () => {
            let roundCount = 1;
            let compScore = 0;
            let playerScore = 0;
            for (let i = 0; i < 5 ; i++) {
                console.log('Round: ' + roundCount);
                let playerChoice = prompt("Choose Your Weapon. Type Either 'Rock', 'Paper', or 'Scissor':");
                let roundResult = playRound(playerChoice, computerPlay());//Result of who won or last the current round
                roundCount += 1;

                
                if (roundResult == 1) {//player earns point
                    console.log(`Round won! ${upperCaseFirst(playerChoice.toLowerCase())} beats ${computerPlay()}!`);
                    playerScore += 1;

                    
                } else if (roundResult == 2) {//computer earns a point
                    console.log(`Round lost, ${upperCaseFirst(playerChoice.toLowerCase())} loses to ${computerPlay()}.`);
                    compScore += 1;

                    
                } else {//nobdody  earns a point
                    i--;
                    roundCount -= 1;
                    console.log(`It's a tie.`);
                    console.log(prompt("It's a tie! Choose again to settle the the score."));
                    compScore += 0;
                    playerScore += 0;

                }
            }

            while(compScore != 5 || playerScore != 5){
            if (compScore < playerScore) {
                playerScore += 1;
                console.log(`You Win! Final Scores \nYou: ${playerScore}\nComputer: ${compScore}`);
                return 'Game Over';
            } else if(compScore > playerScore) {
                compScore += 1;
                console.log(`You Lose! Final Scores \nYou: ${playerScore}\nComputer: ${compScore}`);
                return 'Game Over';
            } else {
                console.log(`Its a tie, nodboy wins! Final Scores \nYou: ${playerScore}\nComputer: ${compScore}`);
                return 'Game Over';
            }
        }
            

        };

        console.log(game());


        //Captializes the first letter of a string value and returns it
        function upperCaseFirst(string) {
            return string.replace(string[0], string[0].toUpperCase());
        }

    </script>

</body>

</html>